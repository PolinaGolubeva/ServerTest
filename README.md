# Parking App Server
Server for parking application (test version)

Запуск сервера:
java -jar /path/to/server.jar

Соединение с сервером:
Со стороны парковки - по адресу localhost:8081/parking
Со стороны клиента - по адресу localhost:8080/client

Чтобы почувствовать себя охранником парковки, можно открыть в браузере страницу парковки,
ввести id парковки (тестовый набор парковок включает id от 0 до 19). Далее на странице будут
выведены сгенерированные случайные данные об указанной парковке. Кнопками add car/remove car 
можно менять число свободных мест на парковке, оно автоматически будет отправляться в БД.

Сообщения передаются в следующем виде:
служебная|информация|тело сообщения

Например:
send|parking|{... (parking's JSON)} - сервер отправляет данные о парковке
get|id|15 - сервер получает id требуемой парковки с сайта

Для подключения клиента требуется создать WebSocket с указанным выше адресом подключения.
В сокете требуется реализовать функции получения сообщения, отправки, открытия соединения и 
его закрытия. Формат отправки сообщений указан выше, все заголовки указаны в классе net/utils/MessageGenerator.
Пока настроен обмен данными о парковке без отправки брони для тестирования обмена сообщениями в обе стороны с парковкой.
Для запроса данных о всех парковках требуется отправка запроса "get|allParking|", можно без
сообщения. В ответ сервер отправляет список всех парковок, зарегистрированных в БД. Сообщение
имеет вид\n
get|allParking|{...(List<Parking> JSON)}\n
  
Парсинг JSON-файла опеделяется библиотекой, используемой на клиентской стороне.
Классы парковок и броней определены в пакете dbservice/objects. 
При правильной работе сервера уведомление об изменении состояния парковки (числа свободных мест) должно автоматически
быть отправлено клиенту с полными новыми данными о парковке в сообщении send|parking|... . 

Для использования актуальной версии сервера с тестовой базой данных (читается из файла ParkingBook.txt) требуется добавить папку parkings с соответствующим файлом в директорию с файлом server.jar.
